{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { onSnapshot } from \"@firebase/firestore\";\nimport { useState, useEffect } from \"react\";\nimport firebaseApp from \"../firebase\";\nexport function useBooks() {\n  _s();\n\n  const [books, setBooks] = useState([]);\n  useEffect(() => {\n    let unsubscribe = firebaseApp.firestore().collection('books').onSnapshot(snapshot => {\n      const data = snapshot.docs.map(doc => {\n        return {\n          id: doc.id,\n          ...doc.data()\n        };\n      });\n      setBooks(data);\n    });\n    return () => unsubscribe();\n  });\n}\n\n_s(useBooks, \"ww1JAI05mMsgubm5EIyBKqdj5S0=\");\n\nexport function useCategories(books) {\n  _s2();\n\n  const [categories, setCategories] = useState([]);\n\n  function calculateNumOfBooks(categoryName, books) {\n    return books.filter(book => book.categoryName === categoryName).length;\n  }\n\n  useEffect(() => {\n    let unsubscribe = firebaseApp.firestore().collection('categories').onSnapshot(snapshot => {\n      const data = snapshot.docs.map(doc => {\n        const categoryName = doc.data().name;\n        return {\n          id: doc.id,\n          name: categoryName,\n          numOfBooks: calculateNumOfBooks(categoryName, books)\n        };\n      });\n      setCategories(data);\n    });\n    return () => unsubscribe();\n  });\n  return categories;\n}\n\n_s2(useCategories, \"+ijgB8ROEl0Dkz53OTIi8GynN6s=\");","map":{"version":3,"sources":["C:/Users/marek/Desktop/projekt/LibraryApp/src/hooks/index.js"],"names":["onSnapshot","useState","useEffect","firebaseApp","useBooks","books","setBooks","unsubscribe","firestore","collection","snapshot","data","docs","map","doc","id","useCategories","categories","setCategories","calculateNumOfBooks","categoryName","filter","book","length","name","numOfBooks"],"mappings":";;;AAAA,SAASA,UAAT,QAA2B,qBAA3B;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,WAAP,MAAwB,aAAxB;AAEA,OAAO,SAASC,QAAT,GAAoB;AAAA;;AACvB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBL,QAAQ,CAAC,EAAD,CAAlC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIK,WAAW,GAAGJ,WAAW,CACxBK,SADa,GAEbC,UAFa,CAEF,OAFE,EAGbT,UAHa,CAGFU,QAAQ,IAAI;AACpB,YAAMC,IAAI,GAAGD,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkBC,GAAG,IAAI;AAClC,eAAO;AACHC,UAAAA,EAAE,EAAED,GAAG,CAACC,EADL;AAEH,aAAGD,GAAG,CAACH,IAAJ;AAFA,SAAP;AAIH,OALY,CAAb;AAMAL,MAAAA,QAAQ,CAACK,IAAD,CAAR;AACH,KAXa,CAAlB;AAaA,WAAO,MAAMJ,WAAW,EAAxB;AACH,GAfQ,CAAT;AAgBH;;GAnBeH,Q;;AAsBhB,OAAO,SAASY,aAAT,CAAuBX,KAAvB,EAA8B;AAAA;;AACjC,QAAM,CAACY,UAAD,EAAaC,aAAb,IAA8BjB,QAAQ,CAAC,EAAD,CAA5C;;AAEA,WAASkB,mBAAT,CAA6BC,YAA7B,EAA2Cf,KAA3C,EAAkD;AAC9C,WAAOA,KAAK,CAACgB,MAAN,CAAaC,IAAI,IAAIA,IAAI,CAACF,YAAL,KAAsBA,YAA3C,EAAyDG,MAAhE;AACH;;AAEDrB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIK,WAAW,GAAGJ,WAAW,CACxBK,SADa,GAEbC,UAFa,CAEF,YAFE,EAGbT,UAHa,CAGFU,QAAQ,IAAI;AACpB,YAAMC,IAAI,GAAGD,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkBC,GAAG,IAAI;AAElC,cAAMM,YAAY,GAAGN,GAAG,CAACH,IAAJ,GAAWa,IAAhC;AAEA,eAAO;AACHT,UAAAA,EAAE,EAAED,GAAG,CAACC,EADL;AAEHS,UAAAA,IAAI,EAAEJ,YAFH;AAGHK,UAAAA,UAAU,EAAEN,mBAAmB,CAACC,YAAD,EAAef,KAAf;AAH5B,SAAP;AAMH,OAVY,CAAb;AAWAa,MAAAA,aAAa,CAACP,IAAD,CAAb;AACH,KAhBa,CAAlB;AAiBA,WAAO,MAAMJ,WAAW,EAAxB;AACH,GAnBQ,CAAT;AAqBA,SAAOU,UAAP;AACH;;IA7BeD,a","sourcesContent":["import { onSnapshot } from \"@firebase/firestore\";\r\nimport { useState, useEffect } from \"react\";\r\nimport firebaseApp from \"../firebase\";\r\n\r\nexport function useBooks() {\r\n    const [books, setBooks] = useState([])\r\n\r\n    useEffect(() => {\r\n        let unsubscribe = firebaseApp\r\n            .firestore()\r\n            .collection('books')\r\n            .onSnapshot(snapshot => {\r\n                const data = snapshot.docs.map(doc => {\r\n                    return {\r\n                        id: doc.id,\r\n                        ...doc.data()\r\n                    }\r\n                })\r\n                setBooks(data)\r\n            })\r\n\r\n        return () => unsubscribe()\r\n    })\r\n}\r\n\r\n\r\nexport function useCategories(books) {\r\n    const [categories, setCategories] = useState([])\r\n\r\n    function calculateNumOfBooks(categoryName, books) {\r\n        return books.filter(book => book.categoryName === categoryName).length\r\n    }\r\n\r\n    useEffect(() => {\r\n        let unsubscribe = firebaseApp\r\n            .firestore()\r\n            .collection('categories')\r\n            .onSnapshot(snapshot => {\r\n                const data = snapshot.docs.map(doc => {\r\n\r\n                    const categoryName = doc.data().name\r\n\r\n                    return {\r\n                        id: doc.id,\r\n                        name: categoryName,\r\n                        numOfBooks: calculateNumOfBooks(categoryName, books)\r\n                    }\r\n\r\n                })\r\n                setCategories(data)\r\n            })\r\n        return () => unsubscribe()\r\n    })\r\n\r\n    return categories\r\n}"]},"metadata":{},"sourceType":"module"}