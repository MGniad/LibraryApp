{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { onSnapshot } from \"firebase/firestore\";\nimport moment from 'moment';\nimport { useState, useEffect } from \"react\";\nimport firebase from \"../firebase\";\nexport function useBooks() {\n  _s();\n\n  const [books, setBooks] = useState([]);\n  useEffect(() => {\n    let unsubscribe = firebase.firestore().collection('books').onSnapshot(snapshot => {\n      const data = snapshot.docs.map(doc => {\n        return {\n          id: doc.id,\n          ...doc.data()\n        };\n      });\n      setBooks(data);\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n  return books;\n}\n\n_s(useBooks, \"ww1JAI05mMsgubm5EIyBKqdj5S0=\");\n\nexport function useFilterBooks(books, selectedCategory) {\n  _s2();\n\n  const [filteredBooks, setFilteredBooks] = useState([]);\n  useEffect(() => {\n    let data;\n    const todayDateFormated = moment().format('DD/MM/YY');\n    console.log(todayDateFormated);\n\n    if (selectedCategory === 'today') {\n      data = books.filter(book => book.data === \"03/11/21\");\n      console.log(data);\n    } else if (selectedCategory === 'next 7 days') {\n      data = books.filter(book => {\n        const bookDate = moment(book.date, 'DD/MM/YY');\n        const todayDate = moment(todayDateFormated, 'DD/MM/YY');\n        const diffDays = bookDate.diff(todayDate, 'days');\n        return diffDays >= 0 && diffDays < 7;\n      });\n      console.log(data);\n    } else if (selectedCategory === 'all days') {\n      data = books;\n      console.log(data);\n    } else {\n      data = books.filter(book => book.categoryName === selectedCategory);\n      console.log(data);\n    }\n\n    setFilteredBooks(data);\n  }, [books, selectedCategory]);\n  return filteredBooks;\n}\n\n_s2(useFilterBooks, \"hvNVZ27hVawvLa0SVIUFTANu+pI=\");\n\nexport function useCategories(books) {\n  _s3();\n\n  const [categories, setCategories] = useState([]);\n\n  function calculateNumOfBooks(categoryName, books) {\n    return books.filter(book => book.categoryName === categoryName).length;\n  }\n\n  useEffect(() => {\n    let unsubscribe = firebase.firestore().collection('categories').onSnapshot(snapshot => {\n      const data = snapshot.docs.map(doc => {\n        const categoryName = doc.data().name;\n        return {\n          id: doc.id,\n          name: categoryName,\n          numOfBooks: calculateNumOfBooks(categoryName, books)\n        };\n      });\n      setCategories(data);\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n  return categories;\n}\n\n_s3(useCategories, \"+ijgB8ROEl0Dkz53OTIi8GynN6s=\");","map":{"version":3,"sources":["C:/Users/marek/Desktop/projekt/LibraryApp/src/hooks/index.js"],"names":["onSnapshot","moment","useState","useEffect","firebase","useBooks","books","setBooks","unsubscribe","firestore","collection","snapshot","data","docs","map","doc","id","useFilterBooks","selectedCategory","filteredBooks","setFilteredBooks","todayDateFormated","format","console","log","filter","book","bookDate","date","todayDate","diffDays","diff","categoryName","useCategories","categories","setCategories","calculateNumOfBooks","length","name","numOfBooks"],"mappings":"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","sourcesContent":["import { onSnapshot } from \"firebase/firestore\";\r\nimport moment from 'moment';\r\nimport { useState, useEffect } from \"react\";\r\nimport firebase from \"../firebase\";\r\n\r\nexport function useBooks() {\r\n    const [books, setBooks] = useState([])\r\n\r\n    useEffect(() => {\r\n        let unsubscribe = firebase\r\n            .firestore()\r\n            .collection('books')\r\n            .onSnapshot(snapshot => {\r\n                const data = snapshot.docs.map(doc => {\r\n                    return {\r\n                        id: doc.id,\r\n                        ...doc.data()\r\n                    }\r\n                })\r\n                setBooks(data)\r\n            })\r\n\r\n        return () => { unsubscribe() }\r\n    }, [])\r\n\r\n    return books\r\n}\r\n\r\n\r\nexport function useFilterBooks(books, selectedCategory) {\r\n    const [filteredBooks, setFilteredBooks] = useState([])\r\n\r\n    useEffect(() => {\r\n        let data;\r\n        const todayDateFormated = moment().format('DD/MM/YY')\r\n        console.log(todayDateFormated)\r\n\r\n        if (selectedCategory === 'today') {\r\n            data = books.filter(book => book.data === \"03/11/21\")\r\n            console.log(data)\r\n        } else if (selectedCategory === 'next 7 days') {\r\n            data = books.filter(book => {\r\n                const bookDate = moment(book.date, 'DD/MM/YY')\r\n                const todayDate = moment(todayDateFormated, 'DD/MM/YY')\r\n\r\n                const diffDays = bookDate.diff(todayDate, 'days')\r\n\r\n                return diffDays >= 0 && diffDays < 7\r\n            })\r\n            console.log(data)\r\n        } else if (selectedCategory === 'all days') {\r\n            data = books\r\n            console.log(data)\r\n        } else {\r\n            data = books.filter(book => book.categoryName === selectedCategory)\r\n            console.log(data)\r\n        }\r\n\r\n        setFilteredBooks(data)\r\n    }, [books, selectedCategory])\r\n\r\n    return filteredBooks\r\n}\r\n\r\nexport function useCategories(books) {\r\n    const [categories, setCategories] = useState([])\r\n\r\n    function calculateNumOfBooks(categoryName, books) {\r\n        return books.filter(book => book.categoryName === categoryName).length\r\n    }\r\n\r\n    useEffect(() => {\r\n        let unsubscribe = firebase\r\n            .firestore()\r\n            .collection('categories')\r\n            .onSnapshot(snapshot => {\r\n                const data = snapshot.docs.map(doc => {\r\n\r\n                    const categoryName = doc.data().name\r\n\r\n                    return {\r\n                        id: doc.id,\r\n                        name: categoryName,\r\n                        numOfBooks: calculateNumOfBooks(categoryName, books)\r\n                    }\r\n\r\n                })\r\n                setCategories(data)\r\n            })\r\n        return () => { unsubscribe() }\r\n    }, [])\r\n\r\n    return categories\r\n}"]},"metadata":{},"sourceType":"module"}