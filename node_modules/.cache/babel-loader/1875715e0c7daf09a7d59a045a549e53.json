{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport { onSnapshot } from \"firebase/firestore\";\nimport moment from 'moment';\nimport { useState, useEffect } from \"react\";\nimport firebase from \"../firebase\";\nexport function useBooks() {\n  _s();\n\n  const [books, setBooks] = useState([]);\n  useEffect(() => {\n    let unsubscribe = firebase.firestore().collection('books').onSnapshot(snapshot => {\n      const data = snapshot.docs.map(doc => {\n        return {\n          id: doc.id,\n          ...doc.data()\n        };\n      });\n      setBooks(data);\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n  return books;\n}\n\n_s(useBooks, \"ww1JAI05mMsgubm5EIyBKqdj5S0=\");\n\nexport function useFilterBooks(books, selectedCategory) {\n  _s2();\n\n  const [filteredBooks, setFilteredBooks] = useState([]);\n  useEffect(() => {\n    let data;\n    const todayDateFormated = moment().format('DD/MM/YYYY');\n    console.log(todayDateFormated);\n\n    if (selectedCategory === 'today') {\n      data = books.filter(book => book.date === todayDateFormated);\n      console.log(data);\n    } else if (selectedCategory === 'next 7 days') {\n      data = books.filter(book => {\n        const bookDate = moment(book.date, 'DD/MM/YYYY');\n        const todayDate = moment(todayDateFormated, 'DD/MM/YYYY');\n        const diffDays = bookDate.diff(todayDate, 'days');\n        return diffDays >= 0 && diffDays < 7;\n      });\n      console.log(data);\n    } else if (selectedCategory === 'all days') {\n      data = books;\n      console.log(data);\n    } else {\n      data = books.filter(book => book.categoryName === selectedCategory);\n      console.log(data);\n    }\n\n    setFilteredBooks(data);\n  }, [books, selectedCategory]);\n  return filteredBooks;\n}\n\n_s2(useFilterBooks, \"hvNVZ27hVawvLa0SVIUFTANu+pI=\");\n\nexport function useCategories() {\n  _s3();\n\n  const [categories, setCategories] = useState([]);\n  useEffect(() => {\n    let unsubscribe = firebase.firestore().collection('categories').onSnapshot(snapshot => {\n      const data = snapshot.docs.map(doc => {\n        return {\n          id: doc.id,\n          name: doc.data().name\n        };\n      });\n      setCategories(data);\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n  return categories;\n}\n\n_s3(useCategories, \"+ijgB8ROEl0Dkz53OTIi8GynN6s=\");\n\nexport function useCategoriesWithStats(categories, books) {\n  _s4();\n\n  const [categoriesWithStats, setCategoriesWithStats] = useState([]);\n  useEffect(() => {\n    const data = categories.map(category => {\n      return {\n        numOfCategories: books.filter(book => book.categoryName === category.name && !book.checked).length,\n        ...category\n      };\n    });\n    setCategoriesWithStats(data);\n  }, [categories, books]);\n  return setCategoriesWithStats;\n}\n\n_s4(useCategoriesWithStats, \"42gjyutKmTrtsBpre2SMCY2o5mA=\");","map":{"version":3,"sources":["C:/Users/marek/Desktop/projekt/LibraryApp/src/hooks/index.js"],"names":["onSnapshot","moment","useState","useEffect","firebase","useBooks","books","setBooks","unsubscribe","firestore","collection","snapshot","data","docs","map","doc","id","useFilterBooks","selectedCategory","filteredBooks","setFilteredBooks","todayDateFormated","format","console","log","filter","book","date","bookDate","todayDate","diffDays","diff","categoryName","useCategories","categories","setCategories","name","useCategoriesWithStats","categoriesWithStats","setCategoriesWithStats","category","numOfCategories","checked","length"],"mappings":"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","sourcesContent":["import { onSnapshot } from \"firebase/firestore\";\r\nimport moment from 'moment';\r\nimport { useState, useEffect } from \"react\";\r\nimport firebase from \"../firebase\";\r\n\r\nexport function useBooks() {\r\n    const [books, setBooks] = useState([])\r\n\r\n    useEffect(() => {\r\n        let unsubscribe = firebase\r\n            .firestore()\r\n            .collection('books')\r\n            .onSnapshot(snapshot => {\r\n                const data = snapshot.docs.map(doc => {\r\n                    return {\r\n                        id: doc.id,\r\n                        ...doc.data()\r\n                    }\r\n                })\r\n                setBooks(data)\r\n            })\r\n\r\n        return () => { unsubscribe() }\r\n    }, [])\r\n\r\n    return books\r\n}\r\n\r\n\r\nexport function useFilterBooks(books, selectedCategory) {\r\n    const [filteredBooks, setFilteredBooks] = useState([])\r\n\r\n    useEffect(() => {\r\n        let data;\r\n        const todayDateFormated = moment().format('DD/MM/YYYY')\r\n        console.log(todayDateFormated)\r\n\r\n        if (selectedCategory === 'today') {\r\n            data = books.filter(book => book.date === todayDateFormated)\r\n            console.log(data)\r\n        } else if (selectedCategory === 'next 7 days') {\r\n            data = books.filter(book => {\r\n                const bookDate = moment(book.date, 'DD/MM/YYYY')\r\n                const todayDate = moment(todayDateFormated, 'DD/MM/YYYY')\r\n\r\n                const diffDays = bookDate.diff(todayDate, 'days')\r\n\r\n                return diffDays >= 0 && diffDays < 7\r\n            })\r\n            console.log(data)\r\n        } else if (selectedCategory === 'all days') {\r\n            data = books\r\n            console.log(data)\r\n        } else {\r\n            data = books.filter(book => book.categoryName === selectedCategory)\r\n            console.log(data)\r\n        }\r\n\r\n        setFilteredBooks(data)\r\n    }, [books, selectedCategory])\r\n\r\n    return filteredBooks\r\n}\r\n\r\nexport function useCategories() {\r\n    const [categories, setCategories] = useState([])\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        let unsubscribe = firebase\r\n            .firestore()\r\n            .collection('categories')\r\n            .onSnapshot(snapshot => {\r\n                const data = snapshot.docs.map(doc => {\r\n\r\n\r\n                    return {\r\n                        id: doc.id,\r\n                        name: doc.data().name,\r\n\r\n                    }\r\n\r\n                })\r\n                setCategories(data)\r\n            })\r\n        return () => { unsubscribe() }\r\n    }, [])\r\n\r\n    return categories\r\n}\r\n\r\nexport function useCategoriesWithStats(categories, books) {\r\n    const [categoriesWithStats, setCategoriesWithStats] = useState([])\r\n\r\n    useEffect(() => {\r\n        const data = categories.map((category) => {\r\n            return {\r\n                numOfCategories: books.filter(book => book.categoryName === category.name && !book.checked).length,\r\n                ...category\r\n            }\r\n        })\r\n        setCategoriesWithStats(data)\r\n    }, [categories, books])\r\n\r\n    return setCategoriesWithStats\r\n}"]},"metadata":{},"sourceType":"module"}